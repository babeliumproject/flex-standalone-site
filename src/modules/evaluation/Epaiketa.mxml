<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml"
		 xmlns:ns1="modules.evaluation.*"
		 creationComplete="init()"
		 xmlns:ns2="modules.autoevaluation.*"
		 paddingBottom="8">



	<mx:Script>
		<![CDATA[
			import events.*;
			
			import model.DataModel;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.events.IndexChangedEvent;
			import mx.managers.PopUpManager;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			import mx.utils.ArrayUtil;
			
			import view.TimeFormatter;
			
			import vo.CreditHistoryVO;
			import vo.Epai;
			import vo.EvaluationVO;


			private var ep:Epai=new Epai;
			private var ev:EvaluationVO;


			//bideoen izenak
			private static var jatorrizkoBideoa:String;
			private static var grabaketaBideoa:String;
			private static var grabaketenKarpeta:String="audio";

			private var selectedExerciseId:int;

			//grabaketaren id-a
			private static var response_id:int;
			//private static var erabiltzailea : String;
			private static var erabiltzaile_id:int;

			//Erabiltzaileak, bere grabaketa egitean aukeratutako pertsonaia
			private static var aukeratutakoPertsonaia:String="";

			//jakiteko ea bi bideoak batera erreproduzitzen hari diren edo ez
			private static var biakBatera:Boolean=false;

			//jakiteko zein pestaÃ±atako bideoa dagoen aukeratuta
			private var oraingoTab:String="hasiera";

			//bideo Iruzkinaren izena
			private var bideoIruzkinIzena:String;

			//ea Datagrid-ak kargatuak izan diren kontrolatzen dute
			private var niriEp:Boolean=false;
			private var nikEp:Boolean=false;


			private var balioa:String;



			[Bindable]
			private var dpDetail:ArrayCollection;
			[Bindable]
			private var dp:ArrayCollection;
			[Bindable]
			private var dp2:ArrayCollection;
			[Bindable]
			private var dp4:ArrayCollection;



			private var kont:int=new int;

			private var timeFormatter:TimeFormatter=new TimeFormatter();

			private var userLoggedIn:Boolean=false;


			private function set onUserAuthenticated(value:Boolean):void
			{
				if (DataModel.getInstance().isLoggedIn == true)
				{
					userLoggedIn=true;
					erabiltzaile_id=DataModel.getInstance().loggedUser.id;
					epaiketaDat.baloratuGabekoak.send(erabiltzaile_id);
					epaiketaDat.norberariEpaitutakoak.send(erabiltzaile_id);
					epaiketaDat.nikEpaitutakoak.send(erabiltzaile_id);
				}
			}

			private function set onUserDeauthenticated(value:Boolean):void
			{
				if (DataModel.getInstance().isLoggedIn == false)
				{
					userLoggedIn=false;
					balo.visible=false;
					epaitutakoDetail.visible=false;

					grabaketa.seek_denb.visible=false;
					grabaketa.botoiak.enabled=false;

					bideoa.visible=false;
					grabaketa.visible=false;
					hasierakoText.visible=true;
					botoiak.visible=false;

					oraingoTab="hasiera";

					epaiketaDat.baloratuGabekoakLoginGabe();

					//erabiltzaile bat badakiguna ez dela existituko
					epaiketaDat.norberariEpaitutakoak.send("zz");
					epaiketaDat.nikEpaitutakoak.send("zz");

				}
			}

			private function set onTabChange(value:Boolean):void
			{

				balo.visible=false;
				epaitutakoDetail.visible=false;

				grabaketa.seek_denb.visible=false;
				grabaketa.botoiak.enabled=false;

				bideoa.visible=false;
				grabaketa.visible=false;
				hasierakoText.visible=true;
				botoiak.visible=false;

				oraingoTab="hasiera";

				baloratuGabekoak.selectedItem=null;
				bakoitzakEpaitutakoak.selectedItem=null;
				norberariEpaitutakoak.selectedItem=null;

			}


			//Orria kargatzean egin beharrekoa
			public function init():void
			{
				timeFormatter.outputMilliseconds=false;
				//bukatu arte ez dira visible eta enabled jarriko
				grabaketa.seek_denb.visible=false;
				grabaketa.botoiak.enabled=false;

				//Datagrid-ak betetzeko funtzioei deiak


				if (DataModel.getInstance().isLoggedIn)
				{
					erabiltzaile_id=DataModel.getInstance().loggedUser.id;
					epaiketaDat.baloratuGabekoak.send(erabiltzaile_id);
					epaiketaDat.norberariEpaitutakoak.send(erabiltzaile_id);
					epaiketaDat.nikEpaitutakoak.send(erabiltzaile_id);
				}
				else
				{
					epaiketaDat.baloratuGabekoakLoginGabe.send();
				}

				bideoa.setup();
			}

			//Epaiketari dagokion "bidali" botoia sakatzean exekutatuko den funtzioa
			private function check():void
			{
				if ((balorazioa.selectedValue) && (iruzkinak.text != ""))
				{

					balioa=balorazioa.selectedValue.toString();

					//if honek ez du funtzionatzen.. beraz Epaitu.php fitxategian eginda
					if (balorazioa.selectedValue.toString() == "bat")
					{
						balioa="1";
					}
					else if (balorazioa.selectedValue.toString() == "bi")
					{
						balioa="2";
					}
					else if (balorazioa.selectedValue.toString() == "hiru")
					{
						balioa="3";
					}
					else if (balorazioa.selectedValue.toString() == "lau")
					{
						balioa="4";
					}
					else if (balorazioa.selectedValue.toString() == "bost")
					{
						balioa="5";
					}


					//bideo iruzkina gehituz
					if (txek.selected)
					{
						epaiketaDat.insertVideoEpaiketa.send(response_id, erabiltzaile_id, balioa, iruzkinak.text.toString(), bideoIruzkinIzena);
					}
					//bideo iruzkinik gabe
					else
					{
						epaiketaDat.insertEpaiketa.send(response_id, erabiltzaile_id, balioa, iruzkinak.text.toString());
					}
					reset();
					Alert.show("Your assessment has been successfully saved");
				}
				else
				{
					Alert.show("You must specify a score and write a comment with your opinion of the response");
				}
			}

			private function evaluationAddedHandler(event:ResultEvent):void
			{
				var creditHistory:CreditHistoryVO=new CreditHistoryVO();
				creditHistory.videoExerciseId=selectedExerciseId;
				creditHistory.videoResponseId=int(response_id);
				DataModel.getInstance().historicData=creditHistory;
				new CreditEvent(CreditEvent.ADD_CREDITS_FOR_EVALUATING, DataModel.getInstance().loggedUser.id).dispatch();

				//Data inserted on evaluation successfully.
				epaiketaDat.updateGrabaketa.send(response_id);


				balo.setVisible(false);
			}

			private function ratingAmountUpdatedHandler(event:ResultEvent):void
			{
				//We updated the rating amount from this response now we want to update the datagrid
				epaiketaDat.baloratuGabekoak.send(erabiltzaile_id);
				//We want to see our recent evaluation on the tab Responses I assessed
				epaiketaDat.nikEpaitutakoak.send(erabiltzaile_id);
			}

			//Epaiketari dagokion "reset" botoia sakatzean exekutatuko den funtzioa
			private function reset():void
			{
				balorazioa.selection=null;
				iruzkinak.text="";
			}

			private function grafikoaIkusi():void
			{
				var grafikoa:Grafikoak=Grafikoak(PopUpManager.createPopUp(this, Grafikoak, true));
				grafikoa.datuakBidali(response_id);
				PopUpManager.centerPopUp(grafikoa);
			}

			private function bideoaGehitu():void
			{
				var bideo:BideoGrabaketa=BideoGrabaketa(PopUpManager.createPopUp(this, BideoGrabaketa, true));

				bideo.addEventListener(AddVideoEvent.CHANGE_OPTION, bideoaGehituta);
				PopUpManager.centerPopUp(bideo);

			}

			private function bideoaGehituta(event:AddVideoEvent):void
			{
				bideoaGehituBot.visible=false;
				izenb.visible=true;
				txek.visible=true;
				txek.label=event.bideoIzena.toString();
				bideoIruzkinIzena=event.bideoIzena.toString();
			}


			// *****************************************************
			// **     Bideoak batera erreproduzitzeko kontrolak   **
			private function playBatera():void
			{
				bideoa.playVid();
				grabaketa.playVid();
				grabaketa.muteatu();
				biakBatera=true;
			}

			private function pauseBatera():void
			{
				bideoa.pauseVid();
				grabaketa.pauseVid();
				biakBatera=true;
			}

			private function stopBatera():void
			{
				bideoa.stopVid();
				grabaketa.stopVid();
				grabaketa.bolumenaAktibatu();
				bideoa.bolumenaAktibatu();
				biakBatera=true;
			}

			//*******************************************************


			//bideoaren egoera aldaketak
			private function onMyCustomEvent(event:Event):void
			{
				//mx.controls.Alert.show("aa");
				kont++;
				trace("event: " + kont.toString());

			}


			private function grabaketaAmaituta(event:Event):void
			{
				if (oraingoTab == "epaituGabe")
				{
					grabaketa.seek_denb.visible=true;
					grabaketa.botoiak.enabled=true;
					bidali.enabled=true;
					bideoa.bolumenaAktibatu();
					grabaketa.bolumenaAktibatu();
				}
			}

			private function botoiaSakatuDu(event:Event):void
			{
				//mx.controls.Alert.show("botoia!");
				biakBatera=false;
			}


			//AMFPhp

			private function faultHandler(fault:FaultEvent):void
			{
				Alert.show(fault.fault.faultString + "\n" + fault.fault.faultDetail, fault.fault.faultCode.toString());
			}

			private function resultHandlerNiriEpaituta(event:ResultEvent):void
			{
				var result:ArrayCollection=new ArrayCollection(ArrayUtil.toArray(event.result));
				if (epaitutakoDetailDat)
					epaitutakoDetailDat.rowCount=result.length;
				dpDetail=result;
			}

			private function resultHandler(event:ResultEvent):void
			{
				trace(event.result);
			}

			private function baloratuGabekoakLortu(event:ResultEvent):void
			{
				var result:ArrayCollection=new ArrayCollection(ArrayUtil.toArray(event.result));
				if (baloratuGabekoak)
					baloratuGabekoak.rowCount=result.length;
				dp=result;
			}

			private function baloratuGabekoakLortuLoginGabe(event:ResultEvent):void
			{
				var result:ArrayCollection=new ArrayCollection(ArrayUtil.toArray(event.result));
				if (baloratuGabekoak)
					baloratuGabekoak.rowCount=result.length;
				dp=result;
			}

			private function norberariEpaitutakoakLortu(event:ResultEvent):void
			{
				var result:ArrayCollection=new ArrayCollection(ArrayUtil.toArray(event.result));
				if (norberariEpaitutakoak)
					norberariEpaitutakoak.rowCount=result.length;
				dp2=result;
			}

			private function nikEpaitutakoakLortu(event:ResultEvent):void
			{
				var result:ArrayCollection=new ArrayCollection(ArrayUtil.toArray(event.result));
				if (bakoitzakEpaitutakoak)
					bakoitzakEpaitutakoak.rowCount=result.length;
				dp4=result;
			}

			//Datagrid-aren balioak aldatzean egin beharrekoa

			private function changeHandler(event:Event):void
			{
				if (oraingoTab != "epaituGabe")
				{
					frogatu("epaituGabe");
					if (tn2)
						tn2.visible=false;
					grabaketa.botoiak.enabled=false;
					if (niriEp)
						norberariEpaitutakoak.selectedItem=null;
					if (nikEp)
						bakoitzakEpaitutakoak.selectedItem=null;
					oraingoTab="epaituGabe";
				}

				if (DataModel.getInstance().isLoggedIn)
				{
					balo.visible=true;
				}
				ep=Epai(DataGrid(event.target).selectedItem);
				selectedExerciseId=ep.exerciseId;
				bideoa.setBideoIzena(ep.Kodea, ep.exerciseId);
				//bideoa.stopVid();
				bideoa.ezabatuFletxak();
				bideoa.setRolAukeratua(ep.AukeratutakoPertsonaia);


				grabaketa.setBideoIzena(ep.Id, 1);
				trace(ep.Id);
				//grabaketa.stopVid();
				grabaketa.ezabatuFletxak();
				grabaketa.setRolAukeratua(ep.AukeratutakoPertsonaia);

				aukeratutakoPertsonaia=ep.AukeratutakoPertsonaia;

				grabaketa.seek_denb.visible=false;
				bidali.enabled=false;

				bideoaGehituBot.visible=true;
				izenb.visible=false;
				txek.visible=false;


				jatorrizkoBideoa=ep.Kodea;
				grabaketaBideoa=ep.Id;
				response_id=parseInt(ep.response_id);

			}

			private function changeHandlerNiriEpaituak(event:Event):void
			{
				if (!niriEp)
					niriEp=true;
				//trace("change handler niri epaituak");
				if (oraingoTab != "niriEpaituak")
				{
					frogatu("niriEpaituak");
					oraingoTab="niriEpaituak";
					balo.visible=false;
					tn2.visible=true;
					baloratuGabekoak.selectedItem=null;
					baloratuGabekoak.nullItemRenderer;
					if (nikEp)
						bakoitzakEpaitutakoak.selectedItem=null;

					//Bideoa bilatzekoa bistaratu
					grabaketa.seek_denb.visible=true;

					//Grabaketaren botoiak aktibatu
					grabaketa.botoiak.enabled=true;
				}

				//trace("Justo antes de cascar, supongo");
				//ep=Epai(DataGrid(event.target).selectedItem);
				ev=EvaluationVO(DataGrid(event.target).selectedItem);
				//trace("change handler - ep.Id --> " + ep.Id.toString());
				//trace("change handler - ep.Kodea --> " + ep.Kodea.toString());

				bideoa.setBideoIzena(ev.exerciseName, 1);
				//bideoa.stopVid();
				bideoa.ezabatuFletxak();
				bideoa.setRolAukeratua(ev.responseCharacterName);

				grabaketa.setBideoIzena(ev.responseFileIdentifier, 1);
				//grabaketa.stopVid();
				grabaketa.ezabatuFletxak();
				grabaketa.setRolAukeratua(ev.responseCharacterName);
				batazb.text=resourceManager.getString('myResources', 'AVG') + ": " + ev.evaluationAverage;

				aukeratutakoPertsonaia=ev.responseCharacterName;

				bideoaGehituBot.visible=true;
				izenb.visible=false;
				txek.visible=false;


				jatorrizkoBideoa=ev.exerciseName;
				grabaketaBideoa=ev.responseFileIdentifier;

				response_id=ev.responseId;

				epaiketaDat.epaitutakoGrabaketa.send(response_id);

				//Get the autoevaluation info if available
				autoevalPanel.setResponseID(response_id);
			}

			//ea hasierako egoeran dagoen kontrolatzen du
			private function frogatu(egoeraBerria:String):void
			{
				if (oraingoTab == "hasiera")
				{
					bideoa.visible=true;
					grabaketa.visible=true;
					botoiak.visible=true;
					hasierakoText.visible=false;
					oraingoTab=egoeraBerria;
				}
			}

			private function changeHandlerNikEpaituak(event:Event):void
			{
				if (!nikEp)
					nikEp=true;

				//trace("change handler nik epaituak");
				if (oraingoTab != "nikEpaituak")
				{
					frogatu("nikEpaituak");
					balo.visible=false;
					tn2.visible=false;
					baloratuGabekoak.selectedItem=null;
					if (niriEp)
						norberariEpaitutakoak.selectedItem=null;

					oraingoTab="nikEpaituak";

					//Bideoa bilatzekoa bistaratu
					grabaketa.seek_denb.visible=true;

					//Grabaketaren botoiak aktibatu
					grabaketa.botoiak.enabled=true;
				}

				ep=Epai(DataGrid(event.target).selectedItem);
				bideoa.setBideoIzena(ep.Kodea, 1);
				//bideoa.stopVid();
				bideoa.ezabatuFletxak();
				bideoa.setRolAukeratua(ep.AukeratutakoPertsonaia);

				grabaketa.setBideoIzena(ep.Id, 1);
				//grabaketa.stopVid();
				grabaketa.ezabatuFletxak();
				grabaketa.setRolAukeratua(ep.AukeratutakoPertsonaia);

				aukeratutakoPertsonaia=ep.AukeratutakoPertsonaia;

				bideoaGehituBot.visible=true;
				izenb.visible=false;
				txek.visible=false;


				jatorrizkoBideoa=ep.Kodea;
				grabaketaBideoa=ep.Id;
			}

			private function onAddCuepoint(event:AddCuepointEvent):void
			{
				//mx.controls.Alert.show('Hitz egin behar duenaren izena ' + event.izena);

				trace(aukeratutakoPertsonaia + " " + event.izena);
				if (biakBatera)
				{
					if (aukeratutakoPertsonaia == event.izena)
					{
						grabaketa.bolumenaAktibatu();
						bideoa.muteatu();
					}
					else
					{
						bideoa.bolumenaAktibatu();
						grabaketa.muteatu();
					}
				}
			}

			private function bideoIruzkina(event:Event):void
			{
				ep=Epai(DataGrid(event.target).selectedItem);
				if (ep.BideoIruzkina.toString() != "")
				{
					//Alert.show(ep.BideoIruzkina.toString());
					var bideoIruzkin:bideoaIkusi=bideoaIkusi(PopUpManager.createPopUp(this, bideoaIkusi, true));
					PopUpManager.centerPopUp(bideoIruzkin);
					epaitutakoDetailDat.selectedItem=null;

					bideoIruzkin.setBideoIzena(ep.BideoIruzkina.toString());
				}
			}

			private function set showAutoevalTab(val:Boolean):void
			{
				if (tn2 != null)
				{
					//Show the autoevaluation tab if autoevaluation is available, else hide it
					tn2.getTabAt(1).visible=DataModel.getInstance().autoevaluationAvailable;
					tn2.getTabAt(1).enabled=DataModel.getInstance().autoevaluationAvailable;
					tn2.getTabAt(1).includeInLayout=DataModel.getInstance().autoevaluationAvailable;
					tn2.selectedIndex=0;
				}
				else
					DataModel.getInstance().autoevaluationAvailable=true;
			}

			private function durationLabelFunction(item:Object):String
			{
				return timeFormatter.format(item.Iraupena);
			}

			private function refreshTab(event:IndexChangedEvent):void
			{
				switch (event.newIndex)
				{
					case 0:
						baloratuGabekoak.rowCount=dp.length;
						break;
					case 1:
						norberariEpaitutakoak.rowCount=dp2.length;
						break;
					case 2:
						bakoitzakEpaitutakoak.rowCount=dp4.length;
						break;
				}
			}
		]]>
	</mx:Script>

	<mx:Binding source="{DataModel.getInstance().autoevaluationAvailable}"
				destination="this.showAutoevalTab"/>
	<mx:Binding source="{DataModel.getInstance().isLoggedIn == true}"
				destination="onUserAuthenticated"/>
	<mx:Binding source="{DataModel.getInstance().isLoggedIn == false}"
				destination="onUserDeauthenticated"/>
	<mx:Binding source="{DataModel.getInstance().stopVideoFlag}"
				destination="onTabChange"/>


	<!-- AMFPhp -->
	<mx:RemoteObject id="epaiketaDat"
					 destination="empService"
					 source="Epaitu"
					 fault="faultHandler(event)"
					 showBusyCursor="true">
		<mx:method name="epaitutakoGrabaketa"
				   result="resultHandlerNiriEpaituta(event)"/>
		<mx:method name="baloratuGabekoakLoginGabe"
				   result="baloratuGabekoakLortuLoginGabe(event)"/>
		<mx:method name="baloratuGabekoak"
				   result="baloratuGabekoakLortu(event)"/>
		<mx:method name="updateGrabaketa"
				   result="ratingAmountUpdatedHandler(event)"/>
		<mx:method name="norberariEpaitutakoak"
				   result="norberariEpaitutakoakLortu(event)"/>
		<mx:method name="nikEpaitutakoak"
				   result="nikEpaitutakoakLortu(event)"/>
		<mx:method name="insertEpaiketa"
				   result="evaluationAddedHandler(event)"/>
		<mx:method name="insertVideoEpaiketa"
				   result="evaluationAddedHandler(event)"/>
		<mx:method name="bideoaEzabatu"
				   result="resultHandler(event)"/>
	</mx:RemoteObject>


	<mx:VBox id="videoPlayersBox"
			 horizontalAlign="center"
			 height="100%"
			 width="100%">
		<mx:Label id="hasierakoText"
				  text="{resourceManager.getString('myResources', 'AUKERATUBIDEOA')}"/>

		<!-- Bi bideoak batera erreproduzitzeko beharrezko botoiak -->
		<mx:HBox id="botoiak"
				 dropShadowEnabled="true"
				 borderStyle="solid"
				 cornerRadius="5"
				 visible="false">
			<mx:Label text="{resourceManager.getString('myResources', 'BIAKBATERAIKUSI')}"/>
			<mx:LinkButton label="Play"
						   click="playBatera();"/>
			<mx:LinkButton label="Pause"
						   click="pauseBatera();"/>
			<mx:LinkButton label="Stop"
						   click="stopBatera()"/>
		</mx:HBox>
		<mx:HBox height="100%">
			<!-- Bideo objektuak -->
			<ns1:nireBideoa id="bideoa"
							height="100%"
							width="100%"
							myCustomEvent="onMyCustomEvent(event);"
							botoiaSakatuta="botoiaSakatuDu(event)"
							cuePoint="onAddCuepoint( event );"
							visible="false">
			</ns1:nireBideoa>
			<ns1:nireBideoa id="grabaketa"
							height="100%"
							width="100%"
							bukatuDa="grabaketaAmaituta(event)"
							visible="false">
			</ns1:nireBideoa>
		</mx:HBox>
	</mx:VBox>



	<!-- Bideoa aukeratzeko panela, hiru "Tab" ezberdinetan banatuta -->
	<mx:TabNavigator id="tn"
					 width="100%"
					 height="100%"
					 paddingLeft="4"
					 paddingRight="4"
					 paddingBottom="4"
					 change="refreshTab(event)">

		<!-- Epaitu gabe dauden bideoak aukeratzeko zerrenda erakutsiko du -->
		<mx:VBox label="{resourceManager.getString('myResources', 'EPAITUGABEDAUDENAK')}"
				 id="epaituGabe"
				 horizontalAlign="center">
			<mx:DataGrid id="baloratuGabekoak"
						 dataProvider="{dp}"
						 width="100%"
						 horizontalScrollPolicy="off"
						 verticalAlign="middle"
						 change="changeHandler(event)">
				<mx:columns>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'JATORRIZKOA')}"
									   dataField="Kodea"
									   width="{120*0.8}">
						<mx:itemRenderer>
							<mx:Component>
								<mx:VBox>
									<mx:Image id="albumImage"
											  height="{90*0.8}"
											  width="{120*0.8}"
											  source="resources/images/thumbs/{data.Kodea}.jpg"/>
								</mx:VBox>
							</mx:Component>
						</mx:itemRenderer>
					</mx:DataGridColumn>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'OWNER')}"
									   dataField="Jabea"/>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'GRABADOR')}"
									   dataField="Id"
									   visible="false"/>
					<mx:DataGridColumn headerText="Response id"
									   dataField="response_id"
									   visible="false"/>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'IRAUPENA')}"
									   dataField="Iraupena"/>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'BALORAZIOKOP')}"
									   dataField="Baloraturik"/>
					<mx:DataGridColumn headerText="Aukeratutako Pertsonaia"
									   dataField="AukeratutakoPertsonaia"
									   visible="false"/>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'DATE')}"
									   dataField="Data"/>
				</mx:columns>
			</mx:DataGrid>

			<!-- Epaitu gabeko bideoak baloratzeko kaxa -->
			<mx:HBox paddingLeft="10"
					 paddingRight="10"
					 paddingBottom="10"
					 paddingTop="10"
					 width="100%">
				<mx:VBox id="balo"
						 width="100%"
						 backgroundColor="#000000"
						 backgroundAlpha="0.13"
						 horizontalAlign="center"
						 verticalAlign="middle"
						 paddingRight="4"
						 paddingLeft="4"
						 paddingTop="4"
						 paddingBottom="4"
						 visible="false"
						 borderStyle="solid">
					<mx:RadioButtonGroup id="balorazioa"/>
					<mx:Label text="Rate the user's response" fontWeight="bold"/>
					<mx:HRule width="100%"/>	
					<mx:HBox>
						<mx:RadioButton id="bat"
										group="{balorazioa}"
										label="1"/>
						<mx:RadioButton id="bi"
										group="{balorazioa}"
										label="2"/>
						<mx:RadioButton id="hiru"
										group="{balorazioa}"
										label="3"/>
						<mx:RadioButton id="lau"
										group="{balorazioa}"
										label="4"/>
						<mx:RadioButton id="bost"
										group="{balorazioa}"
										label="5"/>
					</mx:HBox>

					<mx:Button label="{resourceManager.getString('myResources', 'ADDVIDEO')}"
							   click="bideoaGehitu()"
							   id="bideoaGehituBot"/>
					<mx:Label id="izenb"
							  text="{resourceManager.getString('myResources','MESSAGE_ADD_VIDEO_EVALUATION')}"
							  visible="false"/>
					<mx:CheckBox id="txek"
								 visible="false"/>

					<mx:TextArea width="100%"
								 height="82"
								 id="iruzkinak"/>
					<mx:HBox>
						<mx:Button label="{resourceManager.getString('myResources', 'BIDALI')}"
								   click="check()"
								   id="bidali"
								   enabled="false"/>
						<mx:Button label="{resourceManager.getString('myResources', 'RESET')}"
								   click="reset()"/>
					</mx:HBox>
				</mx:VBox>
			</mx:HBox>
		</mx:VBox>




		<!-- Niri epaitutako bideoen zerrenda erakusten du -->
		<mx:VBox label="{resourceManager.getString('myResources', 'NIRIPAITUTAKOAK')}">
			<mx:DataGrid width="100%"
						 id="norberariEpaitutakoak"
						 dataProvider="{dp2}"
						 change="changeHandlerNiriEpaituak(event)">
				<mx:columns>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'JATORRIZKOA')}"
									   dataField="exerciseThumbnailUri"
									   width="{120*0.8}">
						<mx:itemRenderer>
							<mx:Component>
								<mx:VBox>
									<mx:Image id="albumImageNorb"
											  height="{90*0.8}"
											  width="{120*0.8}"
											  source="resources/images/thumbs/{data.exerciseThumbnailUri}"/>
								</mx:VBox>
							</mx:Component>
						</mx:itemRenderer>
					</mx:DataGridColumn>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'IRAUPENA')}"
									   dataField="exerciseDuration"/>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'BALORAZIOKOP')}"
									   dataField="responseRatingAmount"/>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'AVG')}"
									   dataField="evaluationAverage"/>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'SELECTEDCHAR')}"
									   dataField="responseCharacterName"/>
				</mx:columns>
			</mx:DataGrid>

			<!-- Niri epaitutako bideoen xehetasunak ematen dituen panela -->
			<mx:TabNavigator id="tn2"
							 visible="false"
							 creationPolicy="all"
							 width="100%"
							 height="100%"
							 paddingLeft="4"
							 paddingRight="4"
							 paddingTop="4"
							 paddingBottom="4">
				<mx:VBox cornerRadius="5"
						 borderStyle="solid"
						 id="epaitutakoDetail"
						 dropShadowEnabled="true"
						 label="Human Evaluation">
					<mx:HBox>
						<mx:Label id="batazb"/>
						<mx:Button id="grafikoakIkusi"
								   label="{resourceManager.getString('myResources', 'DISPLAYGRAPH')}"
								   click="grafikoaIkusi()"/>
						<!-- <mx:Image source="images/graf_icon.png" width="20" height="20" click="grafikoaIkusi()"/> -->
					</mx:HBox>

					<mx:DataGrid id="epaitutakoDetailDat"
								 dataProvider="{dpDetail}"
								 change="bideoIruzkina(event)">
						<mx:columns>
							<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'JUZGE')}"
											   dataField="Epailea"/>
							<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'VALUATION')}"
											   dataField="Balorazioa"/>
							<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'DATE')}"
											   dataField="Data"/>
							<!-- <mx:DataGridColumn headerText="Iruzkinak" dataField="Iruzkinak"/> -->
							<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'COMMENTS')}"
											   dataField="Iruzkinak"
											   width="160">
								<mx:itemRenderer>
									<mx:Component>
										<mx:VBox>
											<mx:TextArea id="textua"
														 backgroundColor="#ffffff"
														 height="100"
														 text="{data.Iruzkinak}"
														 editable="false"
														 width="160"/>
										</mx:VBox>
									</mx:Component>
								</mx:itemRenderer>
							</mx:DataGridColumn>
							<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'VIDEOCOMMENT')}"
											   dataField="BideoIruzkina"/>
						</mx:columns>
					</mx:DataGrid>
				</mx:VBox>
				<ns2:AutoevaluationPanel id="autoevalPanel">
				</ns2:AutoevaluationPanel>
			</mx:TabNavigator>

		</mx:VBox>


		<!-- Nik epaitu ditudan bideoen zerrenda erakusten du -->
		<mx:VBox label="{resourceManager.getString('myResources', 'NIKEPAITUTAKOAK')}"
				 id="nikEpaitutakoak">
			<mx:DataGrid width="100%"
						 id="bakoitzakEpaitutakoak"
						 dataProvider="{dp4}"
						 change="changeHandlerNikEpaituak(event)">
				<mx:columns>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'JATORRIZKOA')}"
									   dataField="Kodea"
									   width="{120*0.8}">
						<mx:itemRenderer>
							<mx:Component>
								<mx:VBox>
									<mx:Image id="albumImageNorb"
											  height="{90*0.8}"
											  width="{120*0.8}"
											  source="resources/images/thumbs/{data.Kodea}.jpg"/>
								</mx:VBox>
							</mx:Component>
						</mx:itemRenderer>
					</mx:DataGridColumn>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'GRABADOR')}"
									   dataField="Id"/>
					<mx:DataGridColumn headerText="Response id"
									   dataField="response_id"
									   visible="false"/>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'IRAUPENA')}"
									   dataField="Iraupena"/>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'BALORAZIOKOP')}"
									   dataField="Baloraturik"/>
					<mx:DataGridColumn headerText="{resourceManager.getString('myResources', 'SELECTEDCHAR')}"
									   dataField="AukeratutakoPertsonaia"
									   visible="true"/>
				</mx:columns>
			</mx:DataGrid>
		</mx:VBox>
	</mx:TabNavigator>


</mx:HBox>
