<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml"
		 paddingTop="4"
		 paddingBottom="4"
		 paddingLeft="8"
		 paddingRight="8"
		 width="100%"
		 verticalAlign="middle"
		 verticalScrollPolicy="off"
		 horizontalScrollPolicy="off"
		 fontFamily="Arial"
		 creationComplete="completeHandler()"
		 xmlns:controls="com.asfusion.controls.*">


	<mx:VBox id="thumbnailsBox">
		<mx:Image id="exerciseThumbnail"
				  scaleContent="true"
				  source="{getExerciseImageSource(data as EvaluationVO)}"
				  autoLoad="true"
				  width="60"
				  height="45"/>
		<mx:Image id="responseThumbnail"
				  scaleContent="true"
				  source="{getResponseImageSource(data as EvaluationVO)}"
				  autoLoad="true"
				  width="60"
				  height="45"/>
	</mx:VBox>

	<mx:VBox id="assessmentDataBox"
			 width="100%"
			 verticalGap="2"
			 verticalScrollPolicy="off"
			 horizontalScrollPolicy="off">

		<mx:HBox id="difficultyLanguageTitleBox"
				 horizontalAlign="left"
				 verticalAlign="middle"
				 horizontalGap="2"
				 width="100%">
			<mx:Image id="exerciseLanguage"
					  width="16"
					  height="16"
					  source="{getFlagSource(data as EvaluationVO)}"/>
			<mx:HBox id="avgDifficultyIndicator"
					 fontFamily="Arial"
					 fontSize="10"
					 borderStyle="solid"
					 borderThickness="1"
					 cornerRadius="4"
					 borderColor="0xcccccc"
					 backgroundColor="0xffffff"
					 horizontalAlign="center"
					 verticalAlign="middle"
					 paddingTop="0"
					 paddingBottom="0">
				<mx:Label text="{getLevelCorrespondence(data.exerciseAvgDifficulty)}"/>
			</mx:HBox>
			<mx:Label id="exerciseTitle"
					  text="{data.exerciseTitle}"
					  fontSize="12"
					  width="100%"
					  textAlign="left"/>
		</mx:HBox>

		<mx:HRule width="100%"
				  height="1"/>

		<mx:HBox id="selectedRoleRatingAmountBox"
				 width="100%">
			<mx:Image id="roleIcon"
					  source="@Embed('../../resources/images/roles.png')"
					  toolTip="{resourceManager.getString('myResources','SELECTEDCHAR')}"/>
			<mx:Label text="{data.responseCharacterName}"/>
			<mx:Spacer/>
			<mx:Label text="{resourceManager.getString('myResources','BALORAZIOKOP')+':'}"
					  fontWeight="bold"/>
			<mx:Label text="{data.responseRatingAmount}"/>
		</mx:HBox>

		<mx:HBox width="100%"
				 horizontalAlign="center">
			<mx:VBox width="50%">
				<mx:HBox id="intonationBox">
					<mx:Label text="{resourceManager.getString('myResources','AVG')+' '+resourceManager.getString('myResources','LABEL_INTONATION_SCORE')+':' }"/>
					<controls:Rating value="{data.intonationScoreAverage}"
									 liveRollOver="false"/>
				</mx:HBox>
				<mx:HBox id="rhythmBox">
					<mx:Label text="{resourceManager.getString('myResources','AVG')+' '+resourceManager.getString('myResources','LABEL_RHYTHM_SCORE')+':' }"/>
					<controls:Rating value="{data.rhythmScoreAverage}"
									 liveRollOver="false"/>
				</mx:HBox>
			</mx:VBox>

			<mx:VBox width="50%">
				<mx:HBox id="fluencyBox">
					<mx:Label text="{resourceManager.getString('myResources','AVG')+' '+resourceManager.getString('myResources','LABEL_FLUENCY_SCORE')+':' }"/>
					<controls:Rating value="{data.fluencyScoreAverage}"
									 liveRollOver="false"/>
				</mx:HBox>
				<mx:HBox id="spontaneityBox">
					<mx:Label text="{resourceManager.getString('myResources','AVG')+' '+resourceManager.getString('myResources','LABEL_SPONTANEITY_SCORE')+':' }"/>
					<controls:Rating value="{data.spontaneityScoreAverage}"
									 liveRollOver="false"/>
				</mx:HBox>
			</mx:VBox>
		</mx:HBox>
		<mx:HBox id="overallBox"
				 width="100%"
				 horizontalAlign="center">
			<mx:Label text="{resourceManager.getString('myResources','AVG')+' '+resourceManager.getString('myResources','LABEL_OVERALL_SCORE')+':' }"/>
			<controls:Rating value="{data.overallScoreAverage}"
							 liveRollOver="false"/>
		</mx:HBox>





	</mx:VBox>

	<mx:Script>
		<![CDATA[
			import model.DataModel;

			import mx.formatters.NumberBaseRoundType;
			import mx.formatters.NumberFormatter;

			import view.common.LocaleFlagResource;

			import vo.EvaluationVO;

			private var _data:Object;
			private var _creationComplete:Boolean=false;

			public function completeHandler():void
			{
				_data=data;
				_creationComplete=true;

			}

			public function getLevelCorrespondence(avgDifficulty:Number):String
			{
				var numFormat:NumberFormatter=new NumberFormatter();
				numFormat.precision=0;
				numFormat.rounding=NumberBaseRoundType.NEAREST;
				var roundedAvgDifficulty:int=int(numFormat.format(avgDifficulty));
				switch (roundedAvgDifficulty)
				{
					case 1:
						return 'A1';
						break;
					case 2:
						return 'A2';
						break;
					case 3:
						return 'B1.1';
						break;
					case 4:
						return 'B1.2';
						break;
					case 5:
						return 'B2.1';
						break;
					case 6:
						return 'B2.2';
						break;
					case 7:
						return 'C1';
						break;
					default:
						return '';
						break;
				}
			}

			public function getFlagSource(temp:EvaluationVO):String
			{
				return LocaleFlagResource.getFlagResource(temp.exerciseLanguage);
			}

			public function getExerciseImageSource(temp:EvaluationVO):String
			{
				var url:String='';
				if (temp.exerciseSource == "Red5")
					url=DataModel.getInstance().thumbURL + "/" + temp.exerciseThumbnailUri;
				else
					url=temp.exerciseThumbnailUri;
				return url;
			}

			public function getResponseImageSource(temp:EvaluationVO):String
			{
				var url:String='';
				if (temp.responseSource == "Red5")
					url=DataModel.getInstance().thumbURL + "/" + temp.responseThumbnailUri;
				else
					url=temp.responseThumbnailUri;
				return url;
			}
		]]>
	</mx:Script>

</mx:HBox>
