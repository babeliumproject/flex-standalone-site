<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009"
		  xmlns:s="library://ns.adobe.com/flex/spark"
		  xmlns:mx="library://ns.adobe.com/flex/mx"
		  xmlns:skins="skins.*"
		  xmlns:view="modules.create.view.*"
		  width="100%"
		  paddingTop="16"
		  paddingBottom="16"
		  paddingLeft="16"
		  paddingRight="16"
		  implements="modules.IGroupInterface">
	<fx:Script>
		<![CDATA[
			import control.URLManager;

			import mx.events.FlexEvent;
			import mx.collections.ArrayCollection;
			import mx.core.UIComponent;

			import spark.events.IndexChangeEvent;

			[Bindable]
			public var viewIndex:uint;

			public static const STEP1:uint=0;
			public static const STEP2:uint=1;
			public static const STEP3:uint=2;

			public var exercisecode:String;

			private function setTabEnabled(index:int, enabled:Boolean):void
			{
				var tab:UIComponent=createSteps.dataGroup.getElementAt(index) as UIComponent;
				if (tab)
					tab.enabled=enabled;
			}

			public function resetGroup():void
			{
				if (exerciseClassification)
					exerciseClassification.resetComponent();
				if (mediaUpload)
					mediaUpload.resetComponent();
			}

			protected function createSteps_changingHandler(event:IndexChangeEvent):void
			{
				var step:int=event.newIndex;
				if (exercisecode)
				{
					URLManager.getInstance().redirect('/create/edit/' + exercisecode + '?s=' + (step + 1));
				}
				else if (step == STEP1)
				{
					URLManager.getInstance().redirect('/create/add');
				}
			}
		]]>
	</fx:Script>

	<s:Label text="{resourceManager.getString('myResources','CREATE_NEW_EXERCISE')}"
			 styleName="h2"/>

	<s:TabBar id="createSteps"
			  skinClass="skins.BootstrapTabBar"
			  changing="createSteps_changingHandler(event)"
			  dataProvider="{stepViewStack}"/>

	<s:VGroup width="100%">
		<mx:ViewStack id="stepViewStack"
					  resizeToContent="true"
					  width="100%"
					  height="100%"
					  creationPolicy="all"
					  selectedIndex="{viewIndex}">
			<s:NavigatorContent id="exClassNC"
								label="{'1. '+resourceManager.getString('myResources','LABEL_THE_EXERCISE')}">
				<view:LabelExercise id="exerciseClassification"
									width="100%"/>
			</s:NavigatorContent>
			<s:NavigatorContent id="addMediaNC"
								label="{'2. '+resourceManager.getString('myResources','ADD_MEDIA')}">
				<view:AddMedia id="mediaUpload"
							   width="100%"/>
			</s:NavigatorContent>
			<s:NavigatorContent id="previewNC"
								label="{'3. '+resourceManager.getString('myResources', 'PREVIEW_PUBLISH')}">
				<s:VGroup>
					<s:Label text="Add controls for previewing and publishing"/>
				</s:VGroup>
			</s:NavigatorContent>
		</mx:ViewStack>

	</s:VGroup>

</s:VGroup>
