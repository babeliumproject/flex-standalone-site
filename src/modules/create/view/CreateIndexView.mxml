<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009"
		  xmlns:s="library://ns.adobe.com/flex/spark"
		  xmlns:mx="library://ns.adobe.com/flex/mx"
		  xmlns:skins="skins.*"
		  xmlns:main="components.main.*"
		  paddingLeft="16"
		  paddingRight="16"
		  paddingTop="16"
		  paddingBottom="16"
		  horizontalAlign="center">

	<fx:Binding source="{DataModel.getInstance().latestCreationsRetrieved}"
				destination="latestCreationsRetrieved"/>

	<fx:Script>
		<![CDATA[
			import control.URLManager;

			import mx.core.UIComponent;

			import model.DataModel;

			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			import mx.resources.ResourceManager;

			import spark.core.SpriteVisualElement;

			[Bindable]
			protected var latestCreationsData:ArrayCollection;

			public function set latestCreationsRetrieved(value:Boolean):void
			{
				if (DataModel.getInstance().latestCreations)
				{
					latestCreationsData=DataModel.getInstance().latestCreations;
				}
			}

			private function changeHandler(event:Event):void
			{
				var obj:Object=List(event.target).selectedItem;
				URLManager.getInstance().redirect('/create/edit/' + obj.exercisecode + '?s=1');
			}
		]]>
	</fx:Script>

	<s:VGroup paddingTop="16" paddingBottom="16">
		<s:Button id="addnewexercise"
				  label="{resourceManager.getString('myResources','CREATE_NEW_EXERCISE')}"
				  click="{URLManager.getInstance().redirect('/create/add')}"
				  styleName="btn-primary"
				  height="60"
				  fontSize="18"
				  buttonMode="true"/>
	</s:VGroup>


	<!-- Display user's latest 5 exercise creations and a link to see all creations -->
	<s:Panel title="{resourceManager.getString('myResources','MY_LATEST_CREATIONS')}"
			 width="100%"
			 minHeight="0">
		<s:layout>
			<s:VerticalLayout paddingBottom="16" paddingLeft="16" paddingRight="16" paddingTop="16"/>
		</s:layout>
		<s:Label id="nocreations"
				 text="{resourceManager.getString('myResources','YOU_HAVENT_CREATED_ANY_EXERCISE_YET')}"
				 includeInLayout="{!latestCreationsData.length}"
				 visible="{!latestCreationsData.length}"/>
		<s:VGroup width="100%"
				  includeInLayout="{latestCreationsData &amp;&amp; latestCreationsData.length}"
				  visible="{latestCreationsData &amp;&amp; latestCreationsData.length}"
				  horizontalAlign="right">
			<s:List id="latestCreationsList"
					width="100%"
					minHeight="0"
					borderVisible="false"
					itemRenderer="modules.create.view.LatestCreationItemRenderer"
					change="changeHandler(event)"
					dataProvider="{latestCreationsData}"
					contentBackgroundAlpha="0">
				<s:layout>
					<s:TileLayout/>
				</s:layout>
			</s:List>
			<skins:IconButton id="seeAllCreations"
							  label="{resourceManager.getString('myResources','SEE_ALL_MY_CREATIONS')}"
							  click="{URLManager.getInstance().redirect('/create/manage')}"
							  styleName="btn-default"/>
		</s:VGroup>

	</s:Panel>

</s:VGroup>
