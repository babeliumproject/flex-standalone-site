<?xml version="1.0" encoding="utf-8"?>
<s:HGroup xmlns:fx="http://ns.adobe.com/mxml/2009"
		  xmlns:s="library://ns.adobe.com/flex/spark"
		  xmlns:mx="library://ns.adobe.com/flex/mx"
		  xmlns:userManagement="modules.userManagement.*"
		  paddingLeft="8"
		  paddingRight="8"
		  paddingBottom="8"
		  width="100%">

	<fx:Script>
		<![CDATA[
			import model.DataModel;

			import mx.collections.ArrayCollection;

			public static const CREDIT_HISTORY_VIEWSTACK_INDEX:int=0;
			public static const CHANGE_PASSWORD_VIEWSTACK_INDEX:int=1;
			public static const TOP_COLLABORATORS_VIEWSTACK_INDEX:int=2;

			//Account options list
			[Bindable]
			public var accountOptions:ArrayCollection=new ArrayCollection(new Array("Credit History", "Password Change", "Top Collaborators"));



			private function accountOptionListChangeHandler():void
			{
				accountOptionsViewStack.selectedIndex=availableOptionsList.selectedIndex;
				availableOptionsList.selectedItem=null;
				changePass.resetToolTips();
			}

			public function changeViewStackIndex(newIndex:int):void
			{
				accountOptionsViewStack.selectedIndex=newIndex;
			}

			public function set onTabChange(flag:Boolean):void
			{
				changePass.resetToolTips();
			}
		]]>
	</fx:Script>

	<fx:Binding source="{DataModel.getInstance().stopVideoFlag}"
				destination="onTabChange"/>

	<s:VGroup height="100%"
			  horizontalAlign="left"
			  width="20%">
		<s:Label text="{resourceManager.getString('myResources','TEXT_USER_ACCOUNT')}"
				 styleName="sectionTitleLabel"
				 id="navigationLabel"/>
		<mx:List id="availableOptionsList"
				 dataProvider="{accountOptions}"
				 width="100%"
				 styleName="boldLabel"
				 change="accountOptionListChangeHandler()">
		</mx:List>
	</s:VGroup>

	<mx:ViewStack id="accountOptionsViewStack"
				  creationPolicy="all"
				  height="100%"
				  width="80%">
		<s:NavigatorContent id="creditHistoryContainerNavContent"
							label="Credit History">
			<userManagement:CreditHistoryPanel id="creditHistoryContainer"
											   width="100%"
											   height="100%"/>
		</s:NavigatorContent>

		<s:NavigatorContent id="changePassNavContent"
							label="Change Password">
			<userManagement:ChangePassword id="changePass"
										   width="80%"
										   horizontalAlign="center"/>
		</s:NavigatorContent>

		<s:NavigatorContent id="topCollaboratorNavContent"
							label="Top Collaborators">
			<s:VGroup id="topCollaborators"
					  horizontalAlign="center">
				<userManagement:TopCollaborators width="30%"
												 id="topCollab">
				</userManagement:TopCollaborators>
			</s:VGroup>
		</s:NavigatorContent>

	</mx:ViewStack>
</s:HGroup>
