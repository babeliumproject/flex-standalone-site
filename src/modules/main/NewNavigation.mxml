<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 xmlns:skins="skins.*"
		 width="100%">

	<s:VGroup width="100%"
			  minWidth="1000"
			  height="100%"
			  gap="0">
		<skins:HorizontalSeparatorLine/>
		<s:BorderContainer id="sectionLinks"
						   borderVisible="false"
						   borderWeight="0"
						   minHeight="0"
						   width="100%"
						   height="100%"
						   backgroundImage="@Embed('resources/images/rainbow_bgr.png')"
						   backgroundImageFillMode="scale">
			<s:layout>
				<s:HorizontalLayout paddingLeft="200"
									horizontalAlign="center"
									verticalAlign="middle"
									clipAndEnableScrolling="true"/>
			</s:layout>
			<mx:LinkButton label="{resourceManager.getString('myResources', 'LABEL_HOME')}"
						   styleName="homeLinkButton"
						   enabled="{!DataModel.getInstance().recordingExercise &amp;&amp;
						   !DataModel.getInstance().recording &amp;&amp;
						   !DataModel.getInstance().playing}"
						   click="changeView(ViewChangeEvent.VIEW_HOME_MODULE)"/>
			<mx:VRule height="40"/>
			<mx:LinkButton label="{resourceManager.getString('myResources', 'LABEL_EXERCISES')}"
						   styleName="practiceLinkButton"
						   enabled="{!DataModel.getInstance().recordingExercise &amp;&amp;
						   !DataModel.getInstance().recording &amp;&amp;
						   !DataModel.getInstance().playing}"
						   click="changeView(ViewChangeEvent.VIEW_EXERCISE_MODULE)"/>
			<mx:VRule height="40"/>
			<mx:LinkButton label="{resourceManager.getString('myResources', 'LABEL_EVALUATIONS')}"
						   styleName="evaluateLinkButton"
						   enabled="{DataModel.getInstance().isLoggedIn &amp;&amp;
						   !DataModel.getInstance().recordingExercise &amp;&amp;
						   !DataModel.getInstance().recording &amp;&amp;
						   !DataModel.getInstance().playing}"
						   click="changeView(ViewChangeEvent.VIEW_EVALUATION_MODULE)"/>
			<mx:VRule height="40"/>
			<mx:LinkButton label="{resourceManager.getString('myResources', 'LABEL_SUBTITLE')}"
						   styleName="subtitleLinkButton"
						   enabled="{DataModel.getInstance().isLoggedIn &amp;&amp;
						   !DataModel.getInstance().recordingExercise &amp;&amp;
						   !DataModel.getInstance().recording &amp;&amp;
						   !DataModel.getInstance().playing}"
						   click="changeView(ViewChangeEvent.VIEW_SUBTITLE_MODULE)"/>
			<mx:VRule height="40"/>
			<mx:LinkButton label="{resourceManager.getString('myResources', 'LABEL_CONFIGURATION')}"
						   id="configuration"
						   styleName="configureLinkButton"
						   enabled="{DataModel.getInstance().isLoggedIn &amp;&amp; 
						   !DataModel.getInstance().recordingExercise &amp;&amp;
						   !DataModel.getInstance().recording &amp;&amp;
						   !DataModel.getInstance().playing}"
						   click="changeView(ViewChangeEvent.VIEW_CONFIGURATION_MODULE)"/>
			<mx:VRule height="40"/>
			<mx:LinkButton label="{resourceManager.getString('myResources', 'LABEL_ABOUT')}"
						   styleName="aboutLinkButton"
						   enabled="{!DataModel.getInstance().recordingExercise &amp;&amp;
						   !DataModel.getInstance().recording &amp;&amp;
						   !DataModel.getInstance().playing}"
						   click="changeView(ViewChangeEvent.VIEW_ABOUT_MODULE)"/>
		</s:BorderContainer>
		<skins:HorizontalSeparatorLine alpha="0.50"/>
		<s:BorderContainer id="searchUploadBar"
						   borderVisible="false"
						   borderWeight="0"
						   minHeight="0"
						   width="100%"
						   minWidth="1000"
						   dropShadowVisible="true">
			<s:backgroundFill>
				<mx:LinearGradient>
					<mx:entries>
						<mx:GradientEntry color="#ffffff"
										  ratio="0"
										  alpha="0.5"/>
						<mx:GradientEntry color="#268caa"
										  ratio="1"
										  alpha="0.5"/>
					</mx:entries>
				</mx:LinearGradient>
			</s:backgroundFill>
			<s:layout>
				<s:HorizontalLayout paddingLeft="200"
									verticalAlign="middle"
									paddingTop="4"
									paddingBottom="4"
									paddingRight="4"/>
			</s:layout>
			<s:Button label="{resourceManager.getString('myResources','LABEL_UPLOAD')}"
					  styleName="uploadButton"
					  enabled="{!DataModel.getInstance().recordingExercise}"
					  click="changeView(ViewChangeEvent.VIEW_UPLOAD_MODULE)"/>
			<s:TextInput id="searchField"
						 styleName="searchTextInput"
						 width="100%"
						 height="26"
						 maxChars="100"
						 enter="launchSearch()"/>
			<s:Button label="{resourceManager.getString('myResources','LABEL_SEARCH')}"
					  styleName="searchButton"
					  enabled="true"
					  click="launchSearch()"/>
		</s:BorderContainer>
		<skins:HorizontalSeparatorLine/>
	</s:VGroup>

	<mx:Image source="resources/images/flan_dull.png"
			  x="20"/>

	<fx:Binding source="{DataModel.getInstance().tagCloudClicked}"
				destination="this.onTagCloudClicked"/>
	<fx:Script>
		<![CDATA[
			import events.VideoStopEvent;
			import events.ViewChangeEvent;
			import events.SearchEvent;
			import model.DataModel;

			//Initialization method
			private function init():void
			{
			}

			private function changeView(event:String):void
			{
				new ViewChangeEvent(event).dispatch();
			}

			private function launchSearch():void
			{
				DataModel.getInstance().searchField=searchField.text;
				//if (DataModel.getInstance().currentContentViewStackIndex != ViewChangeEvent.VIEWSTACK_SEARCH_MODULE_INDEX)
				//{
				changeView(ViewChangeEvent.VIEW_SEARCH_MODULE);
				//}
				new SearchEvent(SearchEvent.LAUNCH_SEARCH).dispatch();
			}

			public function set onTagCloudClicked(value:Boolean):void
			{
				if (DataModel.getInstance().tagCloudClicked)
				{
					searchField.text=DataModel.getInstance().searchField;
					DataModel.getInstance().tagCloudClicked=false;
				}
			}
		]]>
	</fx:Script>

</s:Group>
