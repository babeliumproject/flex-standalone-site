<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" 
		 xmlns:view="modules.assessment.view.*" 
		 xmlns:videoPlayer="components.videoPlayer.*"
		 paddingTop="16"
		 paddingBottom="16"
		 paddingLeft="16"
		 paddingRight="16"
		 implements="modules.IGroupInterface">
	
	<fx:Script>
		<![CDATA[
			import model.DataModel;
			
			import mx.resources.ResourceManager;
			import mx.collections.ArrayCollection;
			
			import vo.EvaluationVO;
			
			[Bindable]
			protected var _exerciseTitle:String;
			[Bindable]
			protected var _evaluationSelected:Boolean;

			
			[Bindable]
			private var dataModel:DataModel=DataModel.getInstance();
			
			protected var assessmentCollection:ArrayCollection;
			
			public function resetGroup():void{
				VP.resetComponent();
				assessmentsOfSubmission.removeAllElements();
			}
			
			protected function set submissionAssessmentsHandler(value:Boolean):void{
				assessmentCollection=dataModel.responseAssessmentData;
				var length:int = assessmentCollection ? assessmentCollection.length : 0;
				if(assessmentCollection){
					noresultLbl.includeInLayout=false;
					noresultLbl.visible=false;
					assessmentsOfSubmission.includeInLayout=true;
					assessmentsOfSubmission.visible=true;		
				} else {
					noresultLbl.includeInLayout=true;
					noresultLbl.visible=true;
					assessmentsOfSubmission.includeInLayout=false;
					assessmentsOfSubmission.visible=false;
				}
				buildEvaluationDatalPanel();
			}
			
			protected function buildEvaluationDatalPanel():void{
				assessmentsOfSubmission.removeAllElements();
				if(assessmentCollection){
					for each (var e:EvaluationVO in assessmentCollection)
					{
						var edb:EvaluationDetailBox=new EvaluationDetailBox();
						assessmentsOfSubmission.addElement(edb);
						edb.evaluationData=e;
					}
				}
			}
			
		]]>
	</fx:Script>

	<fx:Binding source="{dataModel.responseAssessmentDataRetrieved}"
				destination="submissionAssessmentsHandler"/>
	
	<s:VGroup id="videoPlayerBox"
			  width="100%"
			  horizontalAlign="center"
			  includeInLayout="false"
			  visible="false"
			  paddingTop="20"
			  paddingLeft="16"
			  paddingRight="16">
		<s:Label id="exerciseTitle"
				 text="{_exerciseTitle}"
				 width="100%"
				 styleName="exerciseTitleLabel"/>
		<s:HGroup width="100%"
				  horizontalAlign="center">
			<videoPlayer:VideoRecorder id="VP"
									   autoPlay="true"
									   skinUrl="/resources/videoPlayer/skin/white.xml"
									   seek="false"
									   displayCaptions="true"
									   autoScale="false"
									   arrows="false"
									   subtitlingControls="false"
									   width="640"
									   height="360"
									   controlsEnabled="{_evaluationSelected}"/>
		</s:HGroup>
	</s:VGroup>
	
	<s:Label id="noresultLbl" 
			 text="{ResourceManager.getInstance().getString('myResources','NO_RESULTS_WERE_RETURNED_FOR_THAT_QUERY')+'.'}" 
			 includeInLayout="false" 
			 visible="false"/>
	
	<s:VGroup id="assessmentsOfSubmission" width="100%"/>
	
</s:VGroup>
